<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Para Ti ‚Äì Interactivo ‚ù§Ô∏èüñ§</title>
  <!-- Fuentes nuevas y n√≠tidas -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Sora:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --ink:#fff; --muted:#ffd7df; --r1:#ff0033; --border:rgba(255,255,255,.16);
      --card: linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.28));
      --shadow-1: 0 6px 16px rgba(0,0,0,.35); --shadow-2: 0 12px 32px rgba(0,0,0,.6);
      --font-heading:'Sora', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      --font-body:'Outfit', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; --h-letter:-0.01em;
    }
    html,body{height:100%}
    body{margin:0;color:var(--ink);background:linear-gradient(180deg,var(--r1) 0%, #990018 35%, #45000b 65%, #000 100%);background-attachment:fixed;line-height:1.6;font-family:var(--font-body)}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:1180px;margin:0 auto;padding:0 20px}

    header{position:sticky;top:0;z-index:50;background:rgba(0,0,0,.55);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .nav{display:flex;justify-content:space-between;align-items:center;height:68px}
    .brand{font-family:var(--font-heading);font-weight:800;letter-spacing:.02em}
    .menu{display:flex;gap:.5rem;align-items:center}
    .menu a{padding:8px 12px;border-radius:10px;transition:.2s;border:1px solid transparent}
    .menu a:hover{background:rgba(255,255,255,.12);border-color:var(--border)}
    .menu a.active{background:linear-gradient(180deg, rgba(255,0,43,.35), rgba(0,0,0,.2));border-color:rgba(255,0,43,.6);box-shadow:0 10px 24px -8px rgba(255,0,43,.45)}

    section{display:none;animation:fade .6s ease forwards}
    @keyframes fade{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:none}}

    .hero{display:block;text-align:center;padding:88px 20px}
    .hero h1{font-family:var(--font-heading);letter-spacing:var(--h-letter);font-size:clamp(2.2rem,4vw,3.6rem);margin:0;color:#fff;text-shadow:0 6px 24px rgba(0,0,0,.45)}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;padding:32px 0}
    .polaroid{background:#fff;color:#222;border-radius:14px;padding:10px;box-shadow:0 14px 32px rgba(0,0,0,.5);cursor:pointer;transform:rotate(var(--r,0deg));transition:.25s}
    .polaroid:hover{transform:rotate(var(--r,0deg)) translateY(-4px)}
    .polaroid img{width:100%;height:240px;object-fit:cover;border-radius:10px}
    .polaroid figcaption{text-align:center;margin-top:8px;font-size:.92rem;color:#333}

    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;z-index:55}
    .lightbox.open{display:flex}
    .lightbox .inner{position:relative;max-width:min(92vw,980px)}
    .lightbox img{width:100%;height:auto;border-radius:16px;border:1px solid rgba(255,0,43,.55);box-shadow:var(--shadow-2)}
    .lightbox .close,.lightbox .prev,.lightbox .next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.75);color:#fff;border:1px solid rgba(255,0,43,.55);border-radius:999px;width:44px;height:44px;cursor:pointer;font-size:18px;box-shadow:var(--shadow-2)}
    .lightbox .close{top:-18px;right:-18px;transform:none}.lightbox .prev{left:-12px}.lightbox .next{right:-12px}

    .countdown{text-align:center;padding:40px 0}
    .timer{display:grid;grid-template-columns:repeat(4,minmax(90px,1fr));gap:14px;justify-items:stretch}
    .box{background:linear-gradient(180deg, rgba(255,0,43,.6), rgba(0,0,0,.3));border:1px solid rgba(255,0,43,.6);border-radius:16px;padding:16px 12px;box-shadow:var(--shadow-1)}
    .num{font-size:2rem;font-weight:800;color:#fff}.box small{display:block;color:var(--muted);margin-top:6px}

    /* Barra de audio fija y m√≠nima (fiable) */
    .audio-bar{position:fixed;left:50%;transform:translateX(-50%);bottom:16px;z-index:60;display:flex;gap:8px;align-items:center;background:rgba(0,0,0,.72);border:1px solid rgba(255,0,43,.5);border-radius:14px;box-shadow:var(--shadow-2);padding:8px 10px}
    .audio-bar button{border:1px solid rgba(255,255,255,.25);background:rgba(255,255,255,.1);color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
    .audio-bar .status{font-family:var(--font-heading);font-weight:600;color:#fff;opacity:.9}

    /* Panel tipogr√°fico interactivo */
    .type-toggle{position:fixed;left:16px;bottom:16px;z-index:60}
    .type-toggle .btn{border:1px solid rgba(255,255,255,.25);background:rgba(0,0,0,.65);color:#fff;border-radius:12px;padding:8px 12px;cursor:pointer;box-shadow:var(--shadow-2)}
    .panel{position:fixed;left:16px;bottom:60px;z-index:60;background:rgba(0,0,0,.8);border:1px solid var(--border);border-radius:14px;padding:12px 14px;min-width:260px;display:none;box-shadow:var(--shadow-2)}
    .panel label{display:block;font-size:.86rem;color:#ffd2da;margin:6px 0 4px}
    .panel select,.panel input[type="range"]{width:100%}
    .panel small{color:#ffd2da;opacity:.8}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">para mi pookie dookie</div>
      <nav class="menu" aria-label="Navegaci√≥n principal">
        <a data-target="hero" class="active">Inicio</a>
        <a data-target="galeria">Galer√≠a</a>
        <a data-target="cuenta">Cuenta atr√°s</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="hero" class="hero">
      <h1><PAram>TE AMO MUCHO MIVIDA
    </PAram></h1>
    <p>Hola meloncito, cada vez queda menos para que ya nos veamos, lo que mas se echa de menos es poderte dar un abrazo cuando mas lo necesito o meterte mi dedo en tu boquita cuando bostezas. Y al final entieno que la distacia no rompe sino que es una prueba dde que tan real es nuestro amor.</p>
    <p>Te echo mucho de menos peque√±a.</p>
    </section>

    <section id="galeria">
      <h2 class="hero h2" style="font-size:2rem;margin-top:32px">ALBUM</h2>
      <div class="grid">
        <figure class="polaroid" style="--r:-2deg">
          <img src="img/7A2DB171-5AF1-4B2D-B547-405E61BF4AC5.jpg" alt="Recuerdo 1" data-full="img/7A2DB171-5AF1-4B2D-B547-405E61BF4AC5.jpg">
          <figcaption>fotito para mi mami</figcaption>
        </figure>
        <figure class="polaroid" style="--r:-2deg">
          <img src="img/6e100c1f-21a8-4d9a-b4be-a35566b63e9f.jpg" alt="Recuerdo 1" data-full="img/6e100c1f-21a8-4d9a-b4be-a35566b63e9f.jpg">
          <figcaption>albufeira</figcaption>
        </figure>
        <figure class="polaroid" style="--r:1.5deg">
          <img src="img/01b2c2f9-98a3-43a6-ba69-32dabe186de0.jpg" alt="Recuerdo 2" data-full="img/01b2c2f9-98a3-43a6-ba69-32dabe186de0.jpg">
          <figcaption>en la playita</figcaption>
        </figure>
        <figure class="polaroid" style="--r:-1deg">
          <img src="img/044dc52a-efd1-4543-be94-000118f56758.jpg" alt="Recuerdo 3" data-full="img/044dc52a-efd1-4543-be94-000118f56758.jpg">
          <figcaption>cenita</figcaption>
        </figure>
        <figure class="polaroid" style="--r:-2deg">
          <img src="img/5870ba24-6920-4848-b832-17f2de455fdf.jpg">
          <figcaption>cenita</figcaption>
        </figure>
        <figure class="polaroid" style="--r:-2deg">
          <img src="img/6e12fc7c-59ff-4578-9ea7-695bbfe272d7.jpg">
          <figcaption>graduacion</figcaption>
        </figure>
      </div>

      <div class="lightbox" id="lightbox">
        <div class="inner">
          <button class="close" id="lbClose">‚úï</button>
          <button class="prev" id="lbPrev">‚Äπ</button>
          <img id="lbImg" src="" alt="">
          <button class="next" id="lbNext">‚Ä∫</button>
        </div>
      </div>
    </section>

    <section id="cuenta" class="countdown">
      <h2>MANCHESTER</h2>
      <div id="timer" class="timer" data-target="2025-11-13T17:30:00">
        <div class="box"><div class="num" id="dd">00</div><small>d√≠as</small></div>
        <div class="box"><div class="num" id="hh">00</div><small>horas</small></div>
        <div class="box"><div class="num" id="mm">00</div><small>min</small></div>
        <div class="box"><div class="num" id="ss">00</div><small>seg</small></div>
      </div>
    </section>
  </main>

  <!-- M√∫sica de fondo fija -->
  <audio id="bgm" loop preload="auto" playsinline webkit-playsinline></audio>

  <!-- Barra de audio -->
  <div class="audio-bar" id="audioBar">
    <span class="status" id="audioStatus">Listo</span>
    <button id="btnPlay">‚ñ∂ Reproducir</button>
    <button id="btnMute">üîà Silencio</button>
    <button id="btnSrc">‚öôÔ∏è Fuente</button>
  </div>

  <!-- Panel tipogr√°fico interactivo -->
  <div class="type-toggle">
    <button class="btn" id="typeBtn">Ajustes de letra</button>
    <div class="panel" id="typePanel" aria-label="Ajustes tipogr√°ficos">
      <label for="hFont">Fuente t√≠tulos</label>
      <select id="hFont">
        <option value="Sora">Sora</option>
        <option value="Outfit">Outfit</option>
        <option value="system-ui">System UI</option>
      </select>
      <label for="bFont">Fuente texto</label>
      <select id="bFont">
        <option value="Outfit">Outfit</option>
        <option value="Sora">Sora</option>
        <option value="system-ui">System UI</option>
      </select>
      <label for="track">Espaciado t√≠tulos</label>
      <input type="range" id="track" min="-0.06" max="0.1" step="0.005" value="-0.01">
      <small id="trackVal">-0.01</small>
    </div>
  </div>

  <!-- Modal de fuente de audio -->
  <div id="audioModal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);z-index:70">
    <div style="background:rgba(0,0,0,.8);border:1px solid rgba(255,0,43,.6);border-radius:12px;padding:14px;box-shadow:var(--shadow-2);max-width:520px;width:92%">
      <h3 style="margin:0 0 8px">Elegir fuente de la canci√≥n</h3>
      <p style="margin:0 0 10px;opacity:.9">Usar√© este archivo por defecto: <code>20-de-enero.mp3</code> (ponlo junto al HTML). O pega una URL MP3/OGG o sube el archivo.</p>
      <input id="srcUrl" type="url" placeholder="https://.../cancion.mp3" style="width:100%;height:42px;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:#1a0a0d;color:#fff;padding:0 10px;margin:8px 0" />
      <input id="srcFile" type="file" accept="audio/*" style="width:100%;margin:4px 0 10px" />
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button id="srcCancel" style="padding:8px 12px;border-radius:10px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);color:#fff;cursor:pointer">Cancelar</button>
        <button id="srcSave" style="padding:8px 12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,0,43,.6), rgba(0,0,0,.25));border:1px solid rgba(255,0,43,.6);color:#fff;cursor:pointer">Guardar & Reproducir</button>
      </div>
      <p style="margin:10px 0 0;font-size:.9rem;opacity:.85">Si falla por CORS, sube el archivo local.</p>
    </div>
  </div>

  <script>
    // Navegaci√≥n
    (function(){
      const links=document.querySelectorAll('.menu a');
      const sections=document.querySelectorAll('main section');
      function show(id){
        document.querySelectorAll('.menu a').forEach(a=> a.classList.toggle('active', a.dataset.target===id));
        sections.forEach(s=> s.style.display='none');
        const el=document.getElementById(id); if(el) el.style.display='block';
        window.scrollTo({top:0,behavior:'smooth'});
      }
      links.forEach(link=>link.addEventListener('click',e=>{const t=link.dataset.target;if(!t)return;e.preventDefault();show(t);history.replaceState(null,'','#'+t);}));
      const initial=(location.hash||'#hero').replace('#',''); show(initial);
    })();

    // Lightbox
    (function(){
      const lb=document.getElementById('lightbox'); const lbImg=document.getElementById('lbImg');
      const imgs=Array.from(document.querySelectorAll('.polaroid img')); let idx=0;
      function open(i){idx=i; lbImg.src=imgs[i].dataset.full||imgs[i].src; lb.classList.add('open');}
      function close(){lb.classList.remove('open');}
      function prev(){open((idx-1+imgs.length)%imgs.length);} function next(){open((idx+1)%imgs.length);}
      imgs.forEach((im,i)=> im.addEventListener('click',()=>open(i)) );
      document.getElementById('lbClose').onclick=close; document.getElementById('lbPrev').onclick=prev; document.getElementById('lbNext').onclick=next;
      lb.addEventListener('click',e=>{ if(e.target===lb) close(); });
      window.addEventListener('keydown',e=>{ if(!lb.classList.contains('open')) return; if(e.key==='Escape') close(); if(e.key==='ArrowLeft') prev(); if(e.key==='ArrowRight') next(); });
    })();

    // Cuenta atr√°s
    (function(){
      const timer=document.getElementById('timer'); if(!timer) return; const target=new Date(timer.dataset.target);
      const dd=document.getElementById('dd'),hh=document.getElementById('hh'),mm=document.getElementById('mm'),ss=document.getElementById('ss');
      function pad(n){return String(n).padStart(2,'0');}
      function tick(){ const now=new Date(); let diff=target-now; if(diff<=0){timer.innerHTML='<div class="box"><div class="num">00</div><small>¬°Lleg√≥ el momento! üéâ</small></div>'; return;} const d=Math.floor(diff/86400000), h=Math.floor((diff/3600000)%24), m=Math.floor((diff/60000)%60), s=Math.floor((diff/1000)%60); dd.textContent=pad(d); hh.textContent=pad(h); mm.textContent=pad(m); ss.textContent=pad(s);} setInterval(tick,1000); tick();
    })();

    // Tipograf√≠as interactivas
    (function(){
      const btn=document.getElementById('typeBtn');
      const panel=document.getElementById('typePanel');
      const hFont=document.getElementById('hFont');
      const bFont=document.getElementById('bFont');
      const track=document.getElementById('track');
      const trackVal=document.getElementById('trackVal');
      let open=false; btn.addEventListener('click',()=>{ open=!open; panel.style.display=open?'block':'none'; });
      function apply(){
        document.documentElement.style.setProperty('--font-heading', hFont.value==='system-ui'?'system-ui':`'${hFont.value}', ui-sans-serif`);
        document.documentElement.style.setProperty('--font-body', bFont.value==='system-ui'?'system-ui':`'${bFont.value}', ui-sans-serif`);
        document.documentElement.style.setProperty('--h-letter', track.value+"em");
        trackVal.textContent = track.value;
      }
      [hFont,bFont,track].forEach(el=> el.addEventListener('input',apply));
      apply();
    })();

    // AUDIO: ultra simple y fiable
    (function(){
      const audio = document.getElementById('bgm');
      const bar = document.getElementById('audioBar');
      const st = document.getElementById('audioStatus');
      const btnPlay = document.getElementById('btnPlay');
      const btnMute = document.getElementById('btnMute');
      const btnSrc = document.getElementById('btnSrc');
      const modal = document.getElementById('audioModal');
      const srcUrl = document.getElementById('srcUrl');
      const srcFile = document.getElementById('srcFile');
      const srcSave = document.getElementById('srcSave');
      const srcCancel = document.getElementById('srcCancel');

      // 1) Fuente por defecto local
      const DEFAULT_SRC = '20-de-enero.mp3'; // pon este archivo junto al HTML

      function ensureSrc(){
        if(audio.src) return true;
        audio.src = DEFAULT_SRC;
        return true;
      }

      function play(){ ensureSrc(); audio.play().then(()=>{ st.textContent='Sonando'; btnPlay.textContent='‚è∏ Pausar'; }).catch(()=>{ st.textContent='Pulsa ‚ñ∂ Reproducir'; }); }
      function pause(){ audio.pause(); btnPlay.textContent='‚ñ∂ Reproducir'; st.textContent='En pausa'; }

      btnPlay.addEventListener('click', ()=>{ if(audio.paused) play(); else pause(); });
      btnMute.addEventListener('click', ()=>{ audio.muted = !audio.muted; btnMute.textContent = audio.muted ? 'üîà Silencio' : 'üîä Volumen'; });
      btnSrc.addEventListener('click', ()=>{ modal.style.display='flex'; });

      srcCancel.addEventListener('click', ()=>{ modal.style.display='none'; });
      srcSave.addEventListener('click', ()=>{
        if(srcUrl.value.trim()){
          audio.src = srcUrl.value.trim();
        } else if(srcFile.files && srcFile.files[0]){
          audio.src = URL.createObjectURL(srcFile.files[0]);
        } else {
          audio.src = DEFAULT_SRC;
        }
        modal.style.display='none';
        play();
      });

      // Estados visibles
      audio.addEventListener('play', ()=>{ st.textContent='Sonando'; btnPlay.textContent='‚è∏ Pausar'; });
      audio.addEventListener('pause', ()=>{ st.textContent='En pausa'; btnPlay.textContent='‚ñ∂ Reproducir'; });
      audio.addEventListener('error', ()=>{ st.textContent='‚ö†Ô∏è No se encuentra la canci√≥n'; });

      // Intento de autoplay silencioso y gesto siguiente para quitar mute (iOS/Safari)
      audio.muted = true; audio.play().finally(()=>{
        const enable = ()=>{ audio.muted = false; audio.play().catch(()=>{}); window.removeEventListener('click', enable); };
        window.addEventListener('click', enable, { once:true });
      });
    })();
  </script>
</body>
</html>
